<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: LdapModel
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!LdapModel.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (L)</a> &raquo;
    
    
    <span class="title">LdapModel</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: LdapModel
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">LdapModel</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/ldapmodel/search.rb<span class="defines">,<br />
  lib/ldapmodel/helpers.rb,<br /> lib/ldapmodel/profiler.rb,<br /> lib/ldapmodel/attr_conv.rb,<br /> lib/ldapmodel/connection.rb,<br /> lib/ldapmodel/class_store.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Connection management</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="PuavoRest/BootServer.html" title="PuavoRest::BootServer (class)">PuavoRest::BootServer</a></span>, <span class='object_link'><a href="PuavoRest/ExternalFile.html" title="PuavoRest::ExternalFile (class)">PuavoRest::ExternalFile</a></span>, <span class='object_link'><a href="PuavoRest/ExternalService.html" title="PuavoRest::ExternalService (class)">PuavoRest::ExternalService</a></span>, <span class='object_link'><a href="PuavoRest/Group.html" title="PuavoRest::Group (class)">PuavoRest::Group</a></span>, <span class='object_link'><a href="PuavoRest/Host.html" title="PuavoRest::Host (class)">PuavoRest::Host</a></span>, <span class='object_link'><a href="PuavoRest/LegacyRole.html" title="PuavoRest::LegacyRole (class)">PuavoRest::LegacyRole</a></span>, <span class='object_link'><a href="PuavoRest/Organisation.html" title="PuavoRest::Organisation (class)">PuavoRest::Organisation</a></span>, <span class='object_link'><a href="PuavoRest/PrinterQueue.html" title="PuavoRest::PrinterQueue (class)">PuavoRest::PrinterQueue</a></span>, <span class='object_link'><a href="PuavoRest/SambaDomain.html" title="PuavoRest::SambaDomain (class)">PuavoRest::SambaDomain</a></span>, <span class='object_link'><a href="PuavoRest/SambaGroup.html" title="PuavoRest::SambaGroup (class)">PuavoRest::SambaGroup</a></span>, <span class='object_link'><a href="PuavoRest/School.html" title="PuavoRest::School (class)">PuavoRest::School</a></span>, <span class='object_link'><a href="PuavoRest/User.html" title="PuavoRest::User (class)">PuavoRest::User</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="LdapModel/LdapHashError.html" title="LdapModel::LdapHashError (class)">LdapHashError</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="ESCAPES-constant" class="">ESCAPES =
          <div class="docstring">
  <div class="discussion">
    <p><a href="http://tools.ietf.org/html/rfc4515">http://tools.ietf.org/html/rfc4515</a> lists these exceptions from UTF1
charset for filters. All of the following must be escaped in any normal
string using a single backslash (&#39;\&#39;) as escape.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>00</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='comment'># NUL            = %x00 ; null character
</span>  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*</span><span class='tstring_end'>'</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>2A</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='comment'># ASTERISK       = %x2A ; asterisk (&quot;*&quot;)
</span>  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>(</span><span class='tstring_end'>'</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>28</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='comment'># LPARENS        = %x28 ; left parenthesis (&quot;(&quot;)
</span>  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>)</span><span class='tstring_end'>'</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>29</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='comment'># RPARENS        = %x29 ; right parenthesis (&quot;)&quot;)
</span>  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>5C</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='comment'># ESC            = %x5C ; esc (or backslash) (&quot;\&quot;)
</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="ESCAPE_RE-constant" class="">ESCAPE_RE =
          <div class="docstring">
  <div class="discussion">
    <p>Compiled character class regexp using the keys from the above hash.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
  <span class='const'>ESCAPES</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='op'>+</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
<span class='rparen'>)</span></pre></dd>
      
        <dt id="PROF-constant" class="">PROF =
          
        </dt>
        <dd><pre class="code"><span class='const'>LdapSearchProfiler</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ldapsearch</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="KRB_LOCK-constant" class="">KRB_LOCK =
          
        </dt>
        <dd><pre class="code"><span class='const'>Mutex</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></pre></dd>
      
        <dt id="_class_store-classvariable" class="">@@_class_store =
          <div class="docstring">
  <div class="discussion">
    <p>Store for ldap attribute mappings</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_attr_store-instance_method" title="#ldap_attr_store (instance method)">- (Object) <strong>ldap_attr_store</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute ldap_attr_store.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize_attrs-instance_method" title="#serialize_attrs (instance method)">- (Object) <strong>serialize_attrs</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute serialize_attrs.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_class_store-class_method" title="_class_store (class method)">+ (Object) <strong>_class_store</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#after-class_method" title="after (class method)">+ (Object) <strong>after</strong>(*states, &amp;hook_block) { ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Register block to be executed on the given states.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all-class_method" title="all (class method)">+ (Object) <strong>all</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return all ldap entries from the current base.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_filter-class_method" title="base_filter (class method)">+ (Object) <strong>base_filter</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>When filtering models with <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">LdapModel.filter</a></span> this filter will be added to it automatically with AND operator (&amp;).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#before-class_method" title="before (class method)">+ (Object) <strong>before</strong>(*states, &amp;hook_block) { ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Register block to be executed on the given states.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_attr-class_method" title="by_attr (class method)">+ (Array&lt;LdapModel&gt;, LdapModel) <strong>by_attr</strong>(pretty_name, value, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find model by it&#39;s mapped attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_attr%21-class_method" title="by_attr! (class method)">+ (Array&lt;LdapModel&gt;, LdapModel) <strong>by_attr!</strong>(attr, value, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find model by it&#39;s mapped attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_attrs-class_method" title="by_attrs (class method)">+ (Array&lt;LdapModel&gt;, LdapModel) <strong>by_attrs</strong>(filter_attrs, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_attrs%21-class_method" title="by_attrs! (class method)">+ (Array&lt;LdapModel&gt;, LdapModel) <strong>by_attrs!</strong>(filter_attrs, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Raises <span class='object_link'><a href="NotFound.html" title="NotFound (class)">NotFound</a></span> if no models were found.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_dn-class_method" title="by_dn (class method)">+ (Object) <strong>by_dn</strong>(dn, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find model by <code>dn</code> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_dn%21-class_method" title="by_dn! (class method)">+ (Object) <strong>by_dn!</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find model by <code>dn</code> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_dn_array-class_method" title="by_dn_array (class method)">+ (Object) <strong>by_dn_array</strong>(dns) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get array of models by their dn attributes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_id-class_method" title="by_id (class method)">+ (Object) <strong>by_id</strong>(id, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find model by <code>id</code> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_id%21-class_method" title="by_id! (class method)">+ (Object) <strong>by_id!</strong>(id, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find model by <code>id</code> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_ldap_attr-class_method" title="by_ldap_attr (class method)">+ (Array&lt;LdapModel&gt;, LdapModel) <strong>by_ldap_attr</strong>(attr, value, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Filter models by a attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#by_ldap_attr%21-class_method" title="by_ldap_attr! (class method)">+ (Array&lt;LdapModel&gt;, LdapModel) <strong>by_ldap_attr!</strong>(attr, value, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Filter models by a attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#callable_from_instance-class_method" title="callable_from_instance (class method)">+ (Object) <strong>callable_from_instance</strong>(method) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#class_store-class_method" title="class_store (class method)">+ (Object) <strong>class_store</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Like double at sign attributes (@@foo) but they are not shared between subclasses.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_setup-class_method" title="clear_setup (class method)">+ (Object) <strong>clear_setup</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#computed_attr-class_method" title="computed_attr (class method)">+ (Object) <strong>computed_attr</strong>(attr, serialize_name = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A method that will be executed and added to <code>to_hash</code> and <code>to_json</code> conversions of this models.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection-class_method" title="connection (class method)">+ (Object) <strong>connection</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_connection-class_method" title="create_connection (class method)">+ (Object) <strong>create_connection</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create connection for LdapModel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_filter_lambda-class_method" title="create_filter_lambda (class method)">+ (Proc) <strong>create_filter_lambda</strong>(pretty_attr, &amp;convert) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a lambda which converts ldap field value to ldap search filter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dn_bind-class_method" title="dn_bind (class method)">+ (Object) <strong>dn_bind</strong>(dn, pw) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Do LDAP bind with dn and password.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape-class_method" title="escape (class method)">+ (Object) <strong>escape</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Escape unsafe user input for safe LDAP filter use.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#filter-class_method" title="filter (class method)">+ (LdapModel<sup>+</sup>) <strong>filter</strong>(custom_filter, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Do LDAP search with a custom filte combined with <span class='object_link'><a href="#base_filter-class_method" title="LdapModel.base_filter (method)">LdapModel.base_filter</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_ldap_hash-class_method" title="from_ldap_hash (class method)">+ (Object) <strong>from_ldap_hash</strong>(ldap_attrs, serialize_attrs = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inherited-class_method" title="inherited (class method)">+ (Object) <strong>inherited</strong>(subclass) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>copy attributes to inherited subclasses.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_dn-class_method" title="is_dn (class method)">+ (Object) <strong>is_dn</strong>(s) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_not_found%3F-class_method" title="is_not_found? (class method)">+ (Boolean) <strong>is_not_found?</strong>(err) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_attrs-class_method" title="ldap_attrs (class method)">+ (Array&lt;Symbol&gt;) <strong>ldap_attrs</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>LDAP attributes that will be converted.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_base-class_method" title="ldap_base (class method)">+ (Object) <strong>ldap_base</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Override in a subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_map-class_method" title="ldap_map (class method)">+ (Object) <strong>ldap_map</strong>(ldap_name, pretty_name, options = nil) {|value| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Define conversion between LDAP attribute and the JSON attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_op-class_method" title="ldap_op (class method)">+ (Object) <strong>ldap_op</strong>(method, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>ruby-ldap operation wrapper.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organisation-class_method" title="organisation (class method)">+ (Object) <strong>organisation</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get configured organisation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#organisation%3F-class_method" title="organisation? (class method)">+ (Boolean) <strong>organisation?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return true if an organisation is configured.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty2ldap%21-class_method" title="pretty2ldap! (class method)">+ (Object) <strong>pretty2ldap!</strong>(pretty_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty_attrs-class_method" title="pretty_attrs (class method)">+ (Array&lt;Symbol&gt;) <strong>pretty_attrs</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pretty attributes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty_attrs_to_ldap-class_method" title="pretty_attrs_to_ldap (class method)">+ (Object) <strong>pretty_attrs_to_ldap</strong>(attrs = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Convert array of pretty names to ldap attribute names.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#raw_by_dn-class_method" title="raw_by_dn (class method)">+ (Object) <strong>raw_by_dn</strong>(dn, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Find any ldap entry by dn.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#raw_filter-class_method" title="raw_filter (class method)">+ (Array) <strong>raw_filter</strong>(base, filter, attributes = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>LDAP::LDAP_SCOPE_SUBTREE filter search for #ldap_base.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sasl_bind-class_method" title="sasl_bind (class method)">+ (Object) <strong>sasl_bind</strong>(ticket) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Do LDAP sasl bind with a kerberos ticket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-class_method" title="search (class method)">+ (Object) <strong>search</strong>(keywords, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Search for models using keywords.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_filters-class_method" title="search_filters (class method)">+ (Array&lt;Proc&gt;) <strong>search_filters</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#settings-class_method" title="settings (class method)">+ (Object) <strong>settings</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#settings%3D-class_method" title="settings= (class method)">+ (Object) <strong>settings=</strong>(settings) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup-class_method" title="setup (class method)">+ (Object) <strong>setup</strong>(opts, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Configure LDAP bind for LdapModel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_serialize-class_method" title="skip_serialize (class method)">+ (Object) <strong>skip_serialize</strong>(*attrs) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Skip this attribute(s) from serializations such as <code>to_hash</code> and <code>to_json</code>.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(pretty_name) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'></div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(pretty_name, value) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">- (Object) <strong>add</strong>(pretty_name, value) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Append value to <span class='object_link'><a href="LdapConverters/ArrayValue.html" title="LdapConverters::ArrayValue (class)">LdapConverters::ArrayValue</a></span> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_validation_error-instance_method" title="#add_validation_error (instance method)">- (Object) <strong>add_validation_error</strong>(attr, code, message) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add validation error.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">- (Object) <strong>as_json</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assert_validation-instance_method" title="#assert_validation (instance method)">- (Object) <strong>assert_validation</strong>(message = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Raises <span class='object_link'><a href="ValidationError.html" title="ValidationError (class)">ValidationError</a></span> if <span class='object_link'><a href="#add_validation_error-instance_method" title="LdapModel#add_validation_error (method)">#add_validation_error</a></span> was called at least once.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#changed%3F-instance_method" title="#changed? (instance method)">- (Boolean) <strong>changed?</strong>(pretty_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns true if this value is going to be written to ldap on next #save! call.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create%21-instance_method" title="#create! (instance method)">- (Object) <strong>create!</strong>(_dn = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Save new model to LDAP.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dirty%3F-instance_method" title="#dirty? (instance method)">- (Boolean) <strong>dirty?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns true when the model has unsaved changes in attributes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">- (Boolean) <strong>empty?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns trur when the model has no values.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_own-instance_method" title="#get_own (instance method)">- (Object) <strong>get_own</strong>(pretty_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_raw-instance_method" title="#get_raw (instance method)">- (Object) <strong>get_raw</strong>(ldap_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (LdapModel) <strong>initialize</strong>(attrs = {}, options = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of LdapModel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_merge%21-instance_method" title="#ldap_merge! (instance method)">- (Object) <strong>ldap_merge!</strong>(hash) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merge hash of ldap attributes to this model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ldap_set-instance_method" title="#ldap_set (instance method)">- (Object) <strong>ldap_set</strong>(ldap_name, value) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set attribute using the original ldap attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link-instance_method" title="#link (instance method)">- (Object) <strong>link</strong>(path) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge-instance_method" title="#merge (instance method)">- (Object) <strong>merge</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merge value from other LdapModel to this one.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new%3F-instance_method" title="#new? (instance method)">- (Boolean) <strong>new?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns true if the model is present in LDAP.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#object_model-instance_method" title="#object_model (instance method)">- (Object) <strong>object_model</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#once_on_save-instance_method" title="#once_on_save (instance method)">- (Object) <strong>once_on_save</strong>(timing = :before, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create one time hook which is executed once when <code>save!</code> is called.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh-instance_method" title="#refresh (instance method)">- (LdapModel) <strong>refresh</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get new instance of this model from LDAP.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove-instance_method" title="#remove (instance method)">- (Object) <strong>remove</strong>(pretty_name, value) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Remove value from <span class='object_link'><a href="LdapConverters/ArrayValue.html" title="LdapConverters::ArrayValue (class)">LdapConverters::ArrayValue</a></span> attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save%21-instance_method" title="#save! (instance method)">- (Object) <strong>save!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Save changes to LDAP.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#set-instance_method" title="#set (instance method)">- (Object) <strong>set</strong>(pretty_name, value) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_hash-instance_method" title="#to_hash (instance method)">- (Object) <strong>to_hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Convert model to Hash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_json-instance_method" title="#to_json (instance method)">- (Object) <strong>to_json</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>String.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_ldap_hash-instance_method" title="#to_ldap_hash (instance method)">- (Object) <strong>to_ldap_hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transform-instance_method" title="#transform (instance method)">- (Object) <strong>transform</strong>(pretty_name, method, value) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Transform value using the attribute transformer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update%21-instance_method" title="#update! (instance method)">- (Object) <strong>update!</strong>(h) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate-instance_method" title="#validate (instance method)">- (Object) <strong>validate</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Validation method called before saving.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate%21-instance_method" title="#validate! (instance method)">- (Object) <strong>validate!</strong>(message = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Run hooks and validations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_unique-instance_method" title="#validate_unique (instance method)">- (Object) <strong>validate_unique</strong>(pretty_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Validate uniqueness of an attribute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_raw-instance_method" title="#write_raw (instance method)">- (Object) <strong>write_raw</strong>(ldap_name, new_val) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Write raw ldap value.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>initialize</strong>(attrs = {}, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of LdapModel</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19
20
21
22
23
24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:existing</span><span class='rbracket'>]</span>
  <span class='ivar'>@ldap_attr_store</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:store</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:serialize</span><span class='rbracket'>]</span>
    <span class='ivar'>@serialize_attrs</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:serialize</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@validation_errors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_reset_pending'>reset_pending</span>
  <span class='id identifier rubyid_update!'>update!</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="ldap_attr_store-instance_method">
  
    - (<tt>Object</tt>) <strong>ldap_attr_store</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute ldap_attr_store</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ldap_attr_store'>ldap_attr_store</span>
  <span class='ivar'>@ldap_attr_store</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="serialize_attrs-instance_method">
  
    - (<tt>Object</tt>) <strong>serialize_attrs</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute serialize_attrs</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_serialize_attrs'>serialize_attrs</span>
  <span class='ivar'>@serialize_attrs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="_class_store-class_method">
  
    + (<tt>Object</tt>) <strong>_class_store</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/class_store.rb', line 4</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid__class_store'>_class_store</span>
  <span class='cvar'>@@_class_store</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="after-class_method">
  
    + (<tt>Object</tt>) <strong>after</strong>(*states, &amp;hook_block) { ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Register block to be executed on the given states</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>*states</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>:create, :update or :validate</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hook_block</span>
      
      
        <span class='type'>(<tt>block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Hook block to be registered</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>lol jee</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 43</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_after'>after</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_states'>states</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_hook_block'>hook_block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hooks'>hooks</span><span class='lbracket'>[</span><span class='symbol'>:after</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_states'>states</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_state'>state</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_hooks'>hooks</span><span class='lbracket'>[</span><span class='symbol'>:after</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_hook_block'>hook_block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all-class_method">
  
    + (<tt>Object</tt>) <strong>all</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return all ldap entries from the current base</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#ldap_base-class_method" title="LdapModel.ldap_base (method)">ldap_base</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 188</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_filter'>filter</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:multiple</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="base_filter-class_method">
  
    + (<tt>Object</tt>) <strong>base_filter</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>When filtering models with <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span> this filter will be
added to it automatically with AND operator (&amp;). Usefull when there are
multiple LdapModels is the same LDAP branch / base.</p>

<p>Override this in subclasses when needed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 221</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_base_filter'>base_filter</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(objectclass=*)</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="before-class_method">
  
    + (<tt>Object</tt>) <strong>before</strong>(*states, &amp;hook_block) { ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Register block to be executed on the given states</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>*states</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>:create, :update or :validate</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hook_block</span>
      
      
        <span class='type'>(<tt>block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Hook block to be registered</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>lol jee</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 35</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_before'>before</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_states'>states</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_hook_block'>hook_block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hooks'>hooks</span><span class='lbracket'>[</span><span class='symbol'>:before</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_states'>states</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_state'>state</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_hooks'>hooks</span><span class='lbracket'>[</span><span class='symbol'>:before</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_hook_block'>hook_block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_attr-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>by_attr</strong>(pretty_name, value, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find model by it&#39;s mapped attribute. It&#39;s safe to call with user input
since the value is escaped before ldap search.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Mapped attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Attribute value to match</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 159</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_attr'>by_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_by_ldap_attr'>by_ldap_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty2ldap!'>pretty2ldap!</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_attr!-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>by_attr!</strong>(attr, value, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find model by it&#39;s mapped attribute. It&#39;s safe to call with user input
since the value is escaped before ldap search.</p>

<p>Raises <span class='object_link'><a href="NotFound.html" title="NotFound (class)">NotFound</a></span> if no models were found</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Mapped attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Attribute value to match</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 166</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_attr!'>by_attr!</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_by_ldap_attr!'>by_ldap_attr!</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty2ldap!'>pretty2ldap!</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_attrs-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>by_attrs</strong>(filter_attrs, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Hash of pretty attributes and values to search for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 116</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_attrs'>by_attrs</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_attrs'>filter_attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_custom_filter'>custom_filter</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(&amp;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_attrs'>filter_attrs</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_pretty2ldap!'>pretty2ldap!</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_filter'>filter</span><span class='lparen'>(</span><span class='id identifier rubyid_custom_filter'>custom_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_attrs!-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>by_attrs!</strong>(filter_attrs, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Raises <span class='object_link'><a href="NotFound.html" title="NotFound (class)">NotFound</a></span> if no models were found</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Hash of pretty attributes and values to search for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 126</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_attrs!'>by_attrs!</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_attrs'>filter_attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_by_attrs'>by_attrs</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_attrs'>filter_attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

   <span class='kw'>if</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span>
      <span class='const'>NotFound</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot find </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span> <span class='rbrace'>}</span><span class='tstring_content'> by </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_filter_attrs'>filter_attrs</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='rparen'>)</span>
   <span class='kw'>end</span>

   <span class='kw'>return</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_dn-class_method">
  
    + (<tt>Object</tt>) <strong>by_dn</strong>(dn, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find model by <code>dn</code> attribute.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>dn string</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#raw_by_dn-class_method" title="LdapModel.raw_by_dn (method)">raw_by_dn</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>LdapModel</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#raw_by_dn-class_method" title="LdapModel.raw_by_dn (method)">raw_by_dn</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 231</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_dn'>by_dn</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_by_dn'>raw_by_dn</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_from_ldap_hash'>from_ldap_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_dn!-class_method">
  
    + (<tt>Object</tt>) <strong>by_dn!</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find model by <code>dn</code> attribute.</p>

<p>Raises <span class='object_link'><a href="NotFound.html" title="NotFound (class)">NotFound</a></span> if no models were found</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>dn string</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#raw_by_dn-class_method" title="LdapModel.raw_by_dn (method)">raw_by_dn</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>LdapModel</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#raw_by_dn-class_method" title="LdapModel.raw_by_dn (method)">raw_by_dn</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 246</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_dn!'>by_dn!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_by_dn'>by_dn</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_res'>res</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotFound</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot find </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_content'> by dn: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_dn_array-class_method">
  
    + (<tt>Object</tt>) <strong>by_dn_array</strong>(dns) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get array of models by their dn attributes.</p>

<p>Nonexistent DNs are ignored.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dns</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>array of dn string</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264
265
266
267
268
269
270
271
272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 260</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_dn_array'>by_dn_array</span><span class='lparen'>(</span><span class='id identifier rubyid_dns'>dns</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_timer'>timer</span> <span class='op'>=</span> <span class='const'>PROF</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>

  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_dns'>dns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dn'>dn</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_by_dn'>by_dn</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span>
      <span class='comment'># Ignore broken dn pointers
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>

  <span class='id identifier rubyid_timer'>timer</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span><span class='tstring_content'>#by_dn_array(&lt;with </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_dns'>dns</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='rbrace'>}</span><span class='tstring_content'> items&gt;)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_id-class_method">
  
    + (<tt>Object</tt>) <strong>by_id</strong>(id, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find model by <code>id</code> attribute.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>LdapModel</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#by_attr-class_method" title="LdapModel.by_attr (method)">by_attr</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 174</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_id'>by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_by_attr'>by_attr</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_id!-class_method">
  
    + (<tt>Object</tt>) <strong>by_id!</strong>(id, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find model by <code>id</code> attribute.</p>

<p>Raises <span class='object_link'><a href="NotFound.html" title="NotFound (class)">NotFound</a></span> if no models were found.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>LdapModel</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#by_attr-class_method" title="LdapModel.by_attr (method)">by_attr</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 181</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_id!'>by_id!</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_by_attr!'>by_attr!</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_ldap_attr-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>by_ldap_attr</strong>(attr, value, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Filter models by a attribute.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attr</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP name of the attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 109</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_ldap_attr'>by_ldap_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_filter'>filter</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_attr'>attr</span> <span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_escape'>escape</span> <span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="by_ldap_attr!-class_method">
  
    + (<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>by_ldap_attr!</strong>(attr, value, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Filter models by a attribute.</p>

<p>Raises <span class='object_link'><a href="NotFound.html" title="NotFound (class)">NotFound</a></span> if no models were found</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attr</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP name of the attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>, <tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 141</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_by_ldap_attr!'>by_ldap_attr!</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
   <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_by_ldap_attr'>by_ldap_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
   <span class='kw'>if</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span>
      <span class='const'>NotFound</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot find </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span> <span class='rbrace'>}</span><span class='tstring_content'> by </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_attr'>attr</span> <span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='rparen'>)</span>
   <span class='kw'>end</span>
   <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="callable_from_instance-class_method">
  
    + (<tt>Object</tt>) <strong>callable_from_instance</strong>(method) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/helpers.rb', line 3</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_callable_from_instance'>callable_from_instance</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_define_method'>define_method</span> <span class='id identifier rubyid_method'>method</span> <span class='kw'>do</span> <span class='op'>|</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='op'>|</span>
    <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="class_store-class_method">
  
    + (<tt>Object</tt>) <strong>class_store</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Like double at sign attributes (@@foo) but they are not shared between
subclasses</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Foo</span>
  <span class='id identifier rubyid_class_store'>class_store</span> <span class='symbol'>:bar</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_get_baz'>get_baz</span>
    <span class='id identifier rubyid_bar'>bar</span><span class='lbracket'>[</span><span class='symbol'>:baz</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'>Foo</span><span class='period'>.</span><span class='id identifier rubyid_bar'>bar</span><span class='lbracket'>[</span><span class='symbol'>:baz</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>1</span>
<span class='id identifier rubyid_assert'>assert</span> <span class='const'>Foo</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_get_baz'>get_baz</span> <span class='op'>==</span> <span class='int'>1</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>accessor name</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/class_store.rb', line 22</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class_store'>class_store</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid__class_store'>_class_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid__class_store'>_class_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_define_singleton_method'>define_singleton_method</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid__class_store'>_class_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_setup-class_method">
  
    + (<tt>Object</tt>) <strong>clear_setup</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 152</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_clear_setup'>clear_setup</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials_cache</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials_cache</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:current_connection</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials_cache</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:current_connection</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_unbind'>unbind</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="computed_attr-class_method">
  
    + (<tt>Object</tt>) <strong>computed_attr</strong>(attr, serialize_name = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A method that will be executed and added to <code>to_hash</code> and <code>to_json</code>
conversions of this models</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attr</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>method to be called in serializations</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>serialization_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Change the name in serialization</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 135</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_computed_attr'>computed_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_serialize_name'>serialize_name</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_computed_attributes'>computed_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_attr'>attr</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_serialize_name'>serialize_name</span> <span class='op'>||</span> <span class='id identifier rubyid_attr'>attr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connection-class_method">
  
    + (<tt>Object</tt>) <strong>connection</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 126</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials_cache</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:current_connection</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_conn'>conn</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials_cache</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:current_connection</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_create_connection'>create_connection</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_connection-class_method">
  
    + (<tt>Object</tt>) <strong>create_connection</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create connection for LdapModel</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 54</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_connection'>create_connection</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot create connection without credentials</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_credentials'>credentials</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:kerberos</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_sasl_bind'>sasl_bind</span><span class='lparen'>(</span><span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:kerberos</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:dn</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>BadCredentials</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DN missing</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:dn</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>BadCredentials</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Password missing</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>begin</span>
      <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='id identifier rubyid_dn_bind'>dn_bind</span><span class='lparen'>(</span><span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:dn</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_err'>err</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid credentials</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>BadCredentials</span><span class='comma'>,</span> <span class='lbrace'>{</span>
        <span class='symbol'>:msg</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid credentials (dn/pw)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='symbol'>:meta</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
          <span class='symbol'>:dn</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:dn</span><span class='rbracket'>]</span><span class='comma'>,</span>
          <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
      <span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>LdapError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Other LDAP error: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>LdapError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ldap bind returned nil instead of connection</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_conn'>conn</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_filter_lambda-class_method">
  
    + (<tt>Proc</tt>) <strong>create_filter_lambda</strong>(pretty_attr, &amp;convert) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a lambda which converts ldap field value to ldap search filter</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='id identifier rubyid_create_filter_lambda'>create_filter_lambda</span><span class='lparen'>(</span><span class='symbol'>:username</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_v'>v</span> <span class='rbrace'>}</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='id identifier rubyid_l'>l</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(uid=*foo*)</span><span class='tstring_end'>&quot;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_attr</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>&amp;convert</span>
      
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324
325
326
327
328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 322</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_filter_lambda'>create_filter_lambda</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_attr'>pretty_attr</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_convert'>convert</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_convert'>convert</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_convert'>convert</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_v'>v</span> <span class='rbrace'>}</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ldap_attr'>ldap_attr</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_attr'>pretty_attr</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unknown pretty attribute '</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_pretty_attr'>pretty_attr</span> <span class='rbrace'>}</span><span class='tstring_content'>' for </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_ldap_attr'>ldap_attr</span>
  <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_keyword'>keyword</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_attr'>ldap_attr</span> <span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_convert'>convert</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_keyword'>keyword</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dn_bind-class_method">
  
    + (<tt>Object</tt>) <strong>dn_bind</strong>(dn, pw) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Do LDAP bind with dn and password</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>password</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 45</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dn_bind'>dn_bind</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='id identifier rubyid_pw'>pw</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>Conn</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ldap</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_set_option'>set_option</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>LDAP_OPT_PROTOCOL_VERSION</span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_start_tls'>start_tls</span>
  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='id identifier rubyid_pw'>pw</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="escape-class_method">
  
    + (<tt>Object</tt>) <strong>escape</strong>(string) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Escape unsafe user input for safe LDAP filter use</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/ruby-ldap/ruby-net-ldap/blob/8ddb2d7c8476c3a2b2ad9fcd367ca0d36edaa611/lib/net/ldap/filter.rb#L247-L264" target="_parent" title="https://github.com/ruby-ldap/ruby-net-ldap/blob/8ddb2d7c8476c3a2b2ad9fcd367ca0d36edaa611/lib/net/ldap/filter.rb#L247-L264">https://github.com/ruby-ldap/ruby-net-ldap/blob/8ddb2d7c8476c3a2b2ad9fcd367ca0d36edaa611/lib/net/ldap/filter.rb#L247-L264</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/helpers.rb', line 41</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='const'>ESCAPE_RE</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_char'>char</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='const'>ESCAPES</span><span class='lbracket'>[</span><span class='id identifier rubyid_char'>char</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="filter-class_method">
  
    + (<tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt><sup>+</sup>) <strong>filter</strong>(custom_filter, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Do LDAP search with a custom filte combined with <span class='object_link'><a href="#base_filter-class_method" title="LdapModel.base_filter (method)">base_filter</a></span>.
<span class='object_link'><a href="#ldap_base-class_method" title="LdapModel.ldap_base (method)">ldap_base</a></span> will be used as the base.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>custom_filter</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:attrs</span>
          <span class="type">(<tt>Array</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Array of pretty attributes to return</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:ldap_attrs</span>
          <span class="type">(<tt>Array</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Array of ldap attributes to return</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:multiple</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Set to <code>true</code> to return Array of LdapModels instead of single one</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:raw</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Set to <code>true</code> to return raw ruby-ldap Hash</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>, <tt>Array&lt;<span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 73</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_filter'>filter</span><span class='lparen'>(</span><span class='id identifier rubyid_custom_filter'>custom_filter</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid__pretty_attrs'>_pretty_attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:attrs</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid__ldap_attrs'>_ldap_attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_get_ldap_attrs'>get_ldap_attrs</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_custom_filter'>custom_filter</span>
    <span class='id identifier rubyid_full_filter'>full_filter</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(&amp;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_base_filter'>base_filter</span> <span class='rbrace'>}</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_custom_filter'>custom_filter</span> <span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_full_filter'>full_filter</span> <span class='op'>=</span> <span class='id identifier rubyid_base_filter'>base_filter</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_filter'>raw_filter</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_base'>ldap_base</span><span class='comma'>,</span> <span class='id identifier rubyid_full_filter'>full_filter</span><span class='comma'>,</span> <span class='id identifier rubyid__ldap_attrs'>_ldap_attrs</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raw</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_entry'>entry</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_from_ldap_hash'>from_ldap_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid__pretty_attrs'>_pretty_attrs</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:multiple</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_res'>res</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WARNING: LDAP filter </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_full_filter'>full_filter</span> <span class='rbrace'>}</span><span class='tstring_content'> returns multiple values for base </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_base'>ldap_base</span> <span class='rbrace'>}</span><span class='tstring_content'> but only one is returned</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_ldap_hash-class_method">
  
    + (<tt>Object</tt>) <strong>from_ldap_hash</strong>(ldap_attrs, serialize_attrs = nil) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/helpers.rb', line 10</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_from_ldap_hash'>from_ldap_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_attrs'>ldap_attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_serialize_attrs'>serialize_attrs</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:serialize</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_serialize_attrs'>serialize_attrs</span><span class='comma'>,</span> <span class='symbol'>:existing</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ldap_merge!'>ldap_merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_attrs'>ldap_attrs</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inherited-class_method">
  
    + (<tt>Object</tt>) <strong>inherited</strong>(subclass) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>copy attributes to inherited subclasses</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>subclass</span>
      
      
        <span class='type'>(<tt>subclass</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/class_store.rb', line 34</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_inherited'>inherited</span><span class='lparen'>(</span><span class='id identifier rubyid_subclass'>subclass</span><span class='rparen'>)</span>
  <span class='id identifier rubyid__class_store'>_class_store</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='id identifier rubyid_subclass'>subclass</span><span class='period'>.</span><span class='id identifier rubyid__class_store'>_class_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_subclass'>subclass</span><span class='period'>.</span><span class='id identifier rubyid__class_store'>_class_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid__class_store'>_class_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_dn-class_method">
  
    + (<tt>Object</tt>) <strong>is_dn</strong>(s) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/helpers.rb', line 14</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_dn'>is_dn</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='comment'># Could be slightly better I think :)
</span>  <span class='comment'># but usernames should have no commas or equal signs
</span>  <span class='id identifier rubyid_s'>s</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_not_found?-class_method">
  
    + (<tt>Boolean</tt>) <strong>is_not_found?</strong>(err) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 214</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_not_found?'>is_not_found?</span><span class='lparen'>(</span><span class='id identifier rubyid_err'>err</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_err'>err</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>ResultError</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such object</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ldap_attrs-class_method">
  
    + (<tt>Array&lt;Symbol&gt;</tt>) <strong>ldap_attrs</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns LDAP attributes that will be converted</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP attributes that will be converted</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 385</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ldap_attrs'>ldap_attrs</span>
  <span class='id identifier rubyid_ldap2pretty'>ldap2pretty</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ldap_base-class_method">
  
    + (<tt>Object</tt>) <strong>ldap_base</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Override in a subclass</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 8</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ldap_base'>ldap_base</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ldap_base is not implemented for </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ldap_map-class_method">
  
    + (<tt>Object</tt>) <strong>ldap_map</strong>(ldap_name, pretty_name, options = nil) {|value| ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Define conversion between LDAP attribute and the JSON attribute. This will
create a getter method named by the <code>pretty_name</code> param</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ldap_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP attribute to transform</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Pretty name for the attribute which will used the access the value from the model instance</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>, <tt><span class='object_link'><a href="LdapConverters/Base.html" title="LdapConverters::Base (class)">LdapConverters::Base</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A LdapConverters::Base subclass or an options hash</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transform</span>
      
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Block used to transform the attribute value when reading</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:transform</span>
          <span class="type">(<tt><span class='object_link'><a href="LdapConverters/Base.html" title="LdapConverters::Base (class)">LdapConverters::Base</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
        <li>
          <span class="name">:default</span>
          <span class="type">(<tt>Object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Default value for the attribute</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Array</tt>, <tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Raw value from ldap. Usually an Array</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 68</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ldap_map'>ldap_map</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='comma'>,</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_transform_block'>transform_block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span>
  <span class='id identifier rubyid_ldap2pretty'>ldap2pretty</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span>

  <span class='id identifier rubyid_mapping_string'>mapping_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span> <span class='rbrace'>}</span><span class='tstring_content'>.ldap_map(:</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='rbrace'>}</span><span class='tstring_content'>, :</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='lbracket'>[</span><span class='const'>NilClass</span><span class='comma'>,</span> <span class='const'>Class</span><span class='comma'>,</span> <span class='const'>Hash</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mapping_string'>mapping_string</span><span class='rbrace'>}</span><span class='tstring_content'> has invalid options argument: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>


  <span class='id identifier rubyid_transform'>transform</span> <span class='op'>=</span> <span class='const'>LdapConverters</span><span class='op'>::</span><span class='const'>SingleValue</span>
  <span class='id identifier rubyid_default_value'>default_value</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>Hash</span>
    <span class='id identifier rubyid_transform'>transform</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:transform</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:transform</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_default_value'>default_value</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span>
    <span class='id identifier rubyid_transform'>transform</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_transform_block'>transform_block</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>!=</span> <span class='const'>Class</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mapping_string'>mapping_string</span><span class='rbrace'>}</span><span class='tstring_content'> cannot use both transform instance and transform block</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_transform_block'>transform_block</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>Class</span>
    <span class='comment'># Inherit the transform class and override the read method with the given
</span>    <span class='comment'># block
</span>    <span class='id identifier rubyid_transform'>transform</span> <span class='op'>=</span> <span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_transform'>transform</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:define_method</span><span class='comma'>,</span> <span class='symbol'>:read</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_transform_block'>transform_block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_attr_options'>attr_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_default_value'>default_value</span><span class='comma'>,</span>
    <span class='symbol'>:transform</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_transform'>transform</span>
  <span class='rbrace'>}</span>

  <span class='comment'># Create simple getter for the attribute if no custom one is defined
</span>  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_define_method'>define_method</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_get_own'>get_own</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_setter_method'>setter_method</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_setter_method'>setter_method</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_define_method'>define_method</span> <span class='id identifier rubyid_setter_method'>setter_method</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_error'>error</span>
        <span class='id identifier rubyid_add_validation_error'>add_validation_error</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_error'>error</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='comment'># Raise type check validation error early here because later it can
</span>        <span class='comment'># cause more weird errors during hooks and validation
</span>        <span class='id identifier rubyid_assert_validation'>assert_validation</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_write_raw'>write_raw</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='comma'>,</span> <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ldap_op-class_method">
  
    + (<tt>Object</tt>) <strong>ldap_op</strong>(method, *args, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>ruby-ldap operation wrapper</p>

<p>The raw ruby-ldap gives very little information on errors. So wrap it and
add a lot more details to the error wrapper.</p>

<p>Log start and end of the operation to syslog. It should make it lot
easier to see which slapd log messages are related to the ruby-ldap
operation. Slapd logs levels must be raised in order the take advantage of
this.</p>

<p>Convert LDAP::ResultError: &quot;No such object&quot; errors to nil return values to
make it consistent with every other not found error.</p>

<p>Each operation are given an UUID so the user response, puavo-rest log and
syslog logs can be combined</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 176</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ldap_op'>ldap_op</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ldap_op_uuid'>ldap_op_uuid</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='int'>25</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>a</span><span class='tstring_end'>'</span></span><span class='op'>..</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>z</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>

  <span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_NOTICE</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>START(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_op_uuid'>ldap_op_uuid</span> <span class='rbrace'>}</span><span class='tstring_content'>)&gt; </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_method'>method</span> <span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_err'>err</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid__err'>_err</span>
    <span class='id identifier rubyid_err'>err</span> <span class='op'>=</span> <span class='id identifier rubyid__err'>_err</span>

    <span class='comment'># not really an error. Just convert to nil response
</span>    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_not_found?'>is_not_found?</span><span class='lparen'>(</span><span class='id identifier rubyid_err'>err</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span> <span class='rbrace'>}</span><span class='tstring_content'>\n\n    was raised by\n\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UUID: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_op_uuid'>ldap_op_uuid</span> <span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_method'>method</span> <span class='rbrace'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)\n</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>LdapError</span><span class='comma'>,</span> <span class='lbrace'>{</span>
      <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='rbrace'>}</span><span class='tstring_content'> (grep syslog for </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_op_uuid'>ldap_op_uuid</span> <span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_message'>message</span><span class='comma'>,</span>
      <span class='symbol'>:op_uuid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ldap_op_uuid'>ldap_op_uuid</span><span class='comma'>,</span>
      <span class='symbol'>:original_error</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_err'>err</span><span class='comma'>,</span>
      <span class='symbol'>:args</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
      <span class='symbol'>:method</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_method'>method</span>
    <span class='rbrace'>}</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_end_msg'>end_msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_err'>err</span>
      <span class='id identifier rubyid_end_msg'>end_msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> ERROR: </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_NOTICE</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>END(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_ldap_op_uuid'>ldap_op_uuid</span> <span class='rbrace'>}</span><span class='tstring_content'>)&gt; </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_end_msg'>end_msg</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organisation-class_method">
  
    + (<tt>Object</tt>) <strong>organisation</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get configured organisation</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 144</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organisation'>organisation</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:organisation</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>BadInput</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot configure organisation for this request</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:organisation</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="organisation?-class_method">
  
    + (<tt>Boolean</tt>) <strong>organisation?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return true if an organisation is configured</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>PuavoRest::Organisation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 138</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_organisation?'>organisation?</span>
  <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:organisation</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pretty2ldap!-class_method">
  
    + (<tt>Object</tt>) <strong>pretty2ldap!</strong>(pretty_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


518
519
520
521
522
523
524
525
526</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 518</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pretty2ldap!'>pretty2ldap!</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ldap_attr'>ldap_attr</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_ldap_attr'>ldap_attr</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='comment'># Would compile to invalid ldap search filter. Throw early with human
</span>    <span class='comment'># readable error message
</span>    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid pretty attribute </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='rbrace'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ldap_attr'>ldap_attr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pretty_attrs-class_method">
  
    + (<tt>Array&lt;Symbol&gt;</tt>) <strong>pretty_attrs</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Pretty attributes</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Pretty attributes</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 390</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pretty_attrs'>pretty_attrs</span>
  <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pretty_attrs_to_ldap-class_method">
  
    + (<tt>Object</tt>) <strong>pretty_attrs_to_ldap</strong>(attrs = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Convert array of pretty names to ldap attribute names</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attrs</span>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 55</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pretty_attrs_to_ldap'>pretty_attrs_to_ldap</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_attrs'>attrs</span>
    <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_attrs'>attrs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="raw_by_dn-class_method">
  
    + (<tt>Object</tt>) <strong>raw_by_dn</strong>(dn, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Find any ldap entry by dn</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:attrs</span>
          <span class="type">(<tt>Array</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Array of pretty attributes to return</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:ldap_attrs</span>
          <span class="type">(<tt>Array</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Array of ldap attributes to return</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 198</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_raw_by_dn'>raw_by_dn</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_get_ldap_attrs'>get_ldap_attrs</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_timer'>timer</span> <span class='op'>=</span> <span class='const'>PROF</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Connection is not setup!</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_raw_filter'>raw_filter</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(objectclass=*)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span>
    <span class='kw'>break</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="raw_filter-class_method">
  
    + (<tt>Array</tt>) <strong>raw_filter</strong>(base, filter, attributes = nil, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>LDAP::LDAP_SCOPE_SUBTREE filter search for #ldap_base</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>base</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP base</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>filter</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP filter</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attributes</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Limit search results and return values to these attributes</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://ruby-ldap.sourceforge.net/rdoc/classes/LDAP/Conn.html#M000025" target="_parent" title="http://ruby-ldap.sourceforge.net/rdoc/classes/LDAP/Conn.html#M000025">http://ruby-ldap.sourceforge.net/rdoc/classes/LDAP/Conn.html#M000025</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 19</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_raw_filter'>raw_filter</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span><span class='comma'>,</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>||=</span> <span class='id identifier rubyid_ldap_attrs'>ldap_attrs</span>

  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_connection'>connection</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot search without a connection</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_timer'>timer</span> <span class='op'>=</span> <span class='const'>PROF</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
      <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_dn'>dn</span> <span class='op'>!=</span> <span class='id identifier rubyid_base'>base</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_ldap_op'>ldap_op</span><span class='lparen'>(</span>
      <span class='symbol'>:search</span><span class='comma'>,</span>
      <span class='id identifier rubyid_base'>base</span><span class='comma'>,</span>
      <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>LDAP_SCOPE_SUBTREE</span><span class='comma'>,</span>
      <span class='id identifier rubyid_filter'>filter</span><span class='comma'>,</span>
      <span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
    <span class='rparen'>)</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_timer'>timer</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span><span class='tstring_content'>#raw_filter(</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='tstring_content'>) base:</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_base'>base</span> <span class='rbrace'>}</span><span class='tstring_content'> attributes:</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span> <span class='rbrace'>}</span><span class='tstring_content'> found </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='rbrace'>}</span><span class='tstring_content'> items</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>PROF</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='lparen'>(</span><span class='id identifier rubyid_timer'>timer</span><span class='rparen'>)</span>
  <span class='kw'>end</span>


  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sasl_bind-class_method">
  
    + (<tt>Object</tt>) <strong>sasl_bind</strong>(ticket) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Do LDAP sasl bind with a kerberos ticket</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 12</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sasl_bind'>sasl_bind</span><span class='lparen'>(</span><span class='id identifier rubyid_ticket'>ticket</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='const'>LDAP</span><span class='op'>::</span><span class='const'>Conn</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ldap</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_set_option'>set_option</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>LDAP_OPT_PROTOCOL_VERSION</span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_sasl_quiet'>sasl_quiet</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_start_tls'>start_tls</span>
  <span class='const'>KRB_LOCK</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_kg'>kg</span> <span class='op'>=</span> <span class='const'>Krb5Gssapi</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fqdn</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>keytab</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_kg'>kg</span><span class='period'>.</span><span class='id identifier rubyid_copy_ticket'>copy_ticket</span><span class='lparen'>(</span><span class='id identifier rubyid_ticket'>ticket</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_org'>org</span> <span class='op'>=</span> <span class='id identifier rubyid_kg'>kg</span><span class='period'>.</span><span class='id identifier rubyid_display_name'>display_name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
      <span class='const'>LdapModel</span><span class='period'>.</span><span class='id identifier rubyid_setup'>setup</span><span class='lparen'>(</span><span class='symbol'>:organisation</span> <span class='op'>=&gt;</span> <span class='const'>PuavoRest</span><span class='op'>::</span><span class='const'>Organisation</span><span class='period'>.</span><span class='id identifier rubyid_by_domain'>by_domain</span><span class='lparen'>(</span><span class='id identifier rubyid_org'>org</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_sasl_bind'>sasl_bind</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>GSSAPI</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>GSSAPI</span><span class='op'>::</span><span class='const'>GssApiError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_err'>err</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Clock skew too great</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>KerberosError</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Your clock is messed up</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>KerberosError</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_err'>err</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Krb5Gssapi</span><span class='op'>::</span><span class='const'>NoDelegation</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_err'>err</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>KerberosError</span><span class='comma'>,</span> <span class='symbol'>:user</span> <span class='op'>=&gt;</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Credentials are not delegated! '--delegation always' missing?</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_kg'>kg</span><span class='period'>.</span><span class='id identifier rubyid_clean_up'>clean_up</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_conn'>conn</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search-class_method">
  
    + (<tt>Object</tt>) <strong>search</strong>(keywords, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Search for models using keywords</p>

<p><code>keywords</code> can be a string of <code>+</code> or space separated keywords or an array
of keywords. Those models are returned which have a match for all the
keywords.</p>

<p>Each model using this method must implement a <span class='object_link'><a href="#search_filters-class_method" title="LdapModel.search_filters (method)">search_filters</a></span> method which
returns an array of lambdas (Proc) which generate the approciate ldap search
filters. See <span class='object_link'><a href="#create_filter_lambda-class_method" title="LdapModel.create_filter_lambda (method)">create_filter_lambda</a></span></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>keywords</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>String of search keywords</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#filter-class_method" title="LdapModel.filter (method)">filter</a></span></p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 294</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='id identifier rubyid_keywords'>keywords</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_keywords'>keywords</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_keywords'>keywords</span> <span class='op'>=</span> <span class='id identifier rubyid_keywords'>keywords</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_keywords'>keywords</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_keywords'>keywords</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_filter_string'>filter_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_keywords'>keywords</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_keyword'>keyword</span><span class='op'>|</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(|</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_search_filters'>search_filters</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sf'>sf</span><span class='op'>|</span>
      <span class='id identifier rubyid_sf'>sf</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_keyword'>keyword</span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_filter'>filter</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_string'>filter_string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:multiple</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search_filters-class_method">
  
    + (<tt>Array&lt;Proc&gt;</tt>) <strong>search_filters</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Proc&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#search-class_method" title="LdapModel.search (method)">search</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 278</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_search_filters'>search_filters</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>search_filters not implemented for </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="settings-class_method">
  
    + (<tt>Object</tt>) <strong>settings</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 93</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:ldap_hash_settings</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span> <span class='symbol'>:credentials_cache</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="settings=-class_method">
  
    + (<tt>Object</tt>) <strong>settings=</strong>(settings) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 97</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings='>settings=</span><span class='lparen'>(</span><span class='id identifier rubyid_settings'>settings</span><span class='rparen'>)</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='lbracket'>[</span><span class='symbol'>:ldap_hash_settings</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_settings'>settings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup-class_method">
  
    + (<tt>Object</tt>) <strong>setup</strong>(opts, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Configure LDAP bind for LdapModel</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>&amp;block</span>
      
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If block is passed the configuration is active only during the exection of the block</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:credentials</span>
          <span class="type">(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Credentials for LDAP bind. Must have <code>:dn</code> and <code>:password</code>
or <code>:kerberos</code>.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:organisation</span>
          <span class="type">(<tt><span class='object_link'><a href="PuavoRest/Organisation.html" title="PuavoRest::Organisation (class)">PuavoRest::Organisation</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
        <li>
          <span class="name">:rest_root</span>
          <span class="type">(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>puavo-rest mount point url</p>
</div>
          
        </li>
      
    </ul>
  
    
    


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 111</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_setup'>setup</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_prev'>prev</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span> <span class='op'>=</span> <span class='id identifier rubyid_prev'>prev</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:credentials</span><span class='rbracket'>]</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:credentials_cache</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span> <span class='op'>=</span> <span class='id identifier rubyid_prev'>prev</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skip_serialize-class_method">
  
    + (<tt>Object</tt>) <strong>skip_serialize</strong>(*attrs) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Skip this attribute(s) from serializations such as <code>to_hash</code> and <code>to_json</code></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attrs</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 142</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_skip_serialize'>skip_serialize</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_skip_serialize_attrs'>skip_serialize_attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    - (<tt>Object</tt>) <strong>[]</strong>(pretty_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'></div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 369</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="[]=-instance_method">
  
    - (<tt>Object</tt>) <strong>[]=</strong>(pretty_name, value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'></div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 374</span>

<span class='kw'>def</span> <span class='op'>[]=</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add-instance_method">
  
    - (<tt>Object</tt>) <strong>add</strong>(pretty_name, value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Append value to <span class='object_link'><a href="LdapConverters/ArrayValue.html" title="LdapConverters::ArrayValue (class)">LdapConverters::ArrayValue</a></span> attribute. Value is persisted on
the next <span class='object_link'><a href="#save%21-instance_method" title="LdapModel#save! (method)">#save!</a></span> call</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Pretty name of the attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value to be appended to the attribute</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_transform'>transform</span> <span class='op'>=</span> <span class='id identifier rubyid_attr_options'>attr_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:transform</span><span class='rbracket'>]</span>

  <span class='comment'># if not LdapConverters::ArrayValue or subclass of it
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_transform'>transform</span> <span class='op'>&lt;=</span> <span class='const'>LdapConverters</span><span class='op'>::</span><span class='const'>ArrayValue</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#add(...) can be called only on LdapConverters::ArrayValue values. Not </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_transform'>transform</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_new?'>new?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot call add on new models. Just set the attribute directly</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@previous_values</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@previous_values</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_mod'>add_mod</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>LDAP_MOD_ADD</span><span class='comma'>,</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_current_val'>current_val</span> <span class='op'>=</span> <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_current_val'>current_val</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_validation_error-instance_method">
  
    - (<tt>Object</tt>) <strong>add_validation_error</strong>(attr, code, message) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add validation error. Error will be raised on the next <span class='object_link'><a href="#save%21-instance_method" title="LdapModel#save! (method)">#save!</a></span> call</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>attr</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Attribute name this error relates to</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>code</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Unique symbol for this name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Human readable message for this error</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354
355
356
357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 351</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_validation_error'>add_validation_error</span><span class='lparen'>(</span><span class='id identifier rubyid_attr'>attr</span><span class='comma'>,</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='ivar'>@validation_errors</span><span class='lbracket'>[</span><span class='id identifier rubyid_attr'>attr</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_err'>err</span><span class='op'>|</span> <span class='id identifier rubyid_err'>err</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='id identifier rubyid_code'>code</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span>
    <span class='symbol'>:code</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_code'>code</span><span class='comma'>,</span>
    <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_message'>message</span>
  <span class='rparen'>)</span>
  <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='ivar'>@validation_errors</span><span class='lbracket'>[</span><span class='id identifier rubyid_attr'>attr</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="as_json-instance_method">
  
    - (<tt>Object</tt>) <strong>as_json</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Object</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Object</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 465</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_json'>as_json</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_to_hash'>to_hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assert_validation-instance_method">
  
    - (<tt>Object</tt>) <strong>assert_validation</strong>(message = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Raises <span class='object_link'><a href="ValidationError.html" title="ValidationError (class)">ValidationError</a></span> if <span class='object_link'><a href="#add_validation_error-instance_method" title="LdapModel#add_validation_error (method)">#add_validation_error</a></span> was called at least once</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional custom error message</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ValidationError.html" title="ValidationError (class)">ValidationError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


497
498
499
500
501
502
503
504
505
506
507</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 497</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_validation'>assert_validation</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@validation_errors</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_errors'>errors</span> <span class='op'>=</span> <span class='ivar'>@validation_errors</span>
  <span class='ivar'>@validation_errors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ValidationError</span><span class='comma'>,</span> <span class='lbrace'>{</span>
    <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Validation error</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:className</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='symbol'>:dn</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span>
    <span class='symbol'>:invalid_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_errors'>errors</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="changed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>changed?</strong>(pretty_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns true if this value is going to be written to ldap on next #save! call</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221
222
223
224
225
226
227
228
229
230
231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 219</span>

<span class='kw'>def</span> <span class='id identifier rubyid_changed?'>changed?</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NoMethodError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>undefined method `</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='rbrace'>}</span><span class='tstring_content'>' for </span><span class='embexpr_beg'>#{</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_new?'>new?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@previous_values</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_val'>current_val</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_prev_val'>prev_val</span> <span class='op'>=</span> <span class='ivar'>@previous_values</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_current_val'>current_val</span> <span class='op'>!=</span> <span class='id identifier rubyid_prev_val'>prev_val</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create!-instance_method">
  
    - (<tt>Object</tt>) <strong>create!</strong>(_dn = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Save new model to LDAP</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>_dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Set to use custom dn</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 301</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='id identifier rubyid__dn'>_dn</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@existing</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot call create! on existing model</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_validate!'>validate!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Creating</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_run_hook'>run_hook</span> <span class='symbol'>:before</span><span class='comma'>,</span> <span class='symbol'>:create</span>

  <span class='id identifier rubyid__dn'>_dn</span> <span class='op'>=</span> <span class='id identifier rubyid_dn'>dn</span> <span class='kw'>if</span> <span class='id identifier rubyid__dn'>_dn</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># XXX: Create close to LDAP call to avoid weird race condition with
</span>  <span class='comment'># LDAP::Mod instances. See the commit from 29-Oct-15
</span>  <span class='id identifier rubyid_mods'>mods</span> <span class='op'>=</span> <span class='id identifier rubyid_get_mods'>get_mods</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_mod'>mod</span><span class='op'>|</span>
    <span class='id identifier rubyid_mod'>mod</span><span class='period'>.</span><span class='id identifier rubyid_mod_type'>mod_type</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dn</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_ldap_op'>ldap_op</span><span class='lparen'>(</span><span class='symbol'>:add</span><span class='comma'>,</span> <span class='id identifier rubyid__dn'>_dn</span><span class='comma'>,</span> <span class='id identifier rubyid_mods'>mods</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_reset_pending'>reset_pending</span>
  <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_run_hook'>run_hook</span> <span class='symbol'>:after</span><span class='comma'>,</span> <span class='symbol'>:create</span>

  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dirty?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>dirty?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns true when the model has unsaved changes in attributes</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dirty?'>dirty?</span>
  <span class='op'>!</span><span class='ivar'>@pending_mods</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="empty?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>empty?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns trur when the model has no values</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 380</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='ivar'>@ldap_attr_store</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_own-instance_method">
  
    - (<tt>Object</tt>) <strong>get_own</strong>(pretty_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Get the transformed attribute value of this model</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 148</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_own'>get_own</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>return</span> <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_default_value'>default_value</span> <span class='op'>=</span> <span class='id identifier rubyid_attr_options'>attr_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='comment'># String values in our LDAP are always UTF-8
</span>  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:force_encoding</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_item'>item</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_default_value'>default_value</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_default_value'>default_value</span>
  <span class='kw'>end</span>

  <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_transform'>transform</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='symbol'>:read</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_raw-instance_method">
  
    - (<tt>Object</tt>) <strong>get_raw</strong>(ldap_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ldap_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Get raw ldap value by ldap attribute name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_raw'>get_raw</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rparen'>)</span>
  <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ldap_merge!-instance_method">
  
    - (<tt>Object</tt>) <strong>ldap_merge!</strong>(hash) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Merge hash of ldap attributes to this model</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>hash</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412
413
414
415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 410</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ldap_merge!'>ldap_merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid_ldap_set'>ldap_set</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ldap_set-instance_method">
  
    - (<tt>Object</tt>) <strong>ldap_set</strong>(ldap_name, value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set attribute using the original ldap attribute</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ldap_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


398
399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 398</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ldap_set'>ldap_set</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ldap2pretty'>ldap2pretty</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="link-instance_method">
  
    - (<tt>Object</tt>) <strong>link</strong>(path) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/connection.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_link'>link</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='symbol'>:rest_root</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_path'>path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge-instance_method">
  
    - (<tt>Object</tt>) <strong>merge</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Merge value from other LdapModel to this one</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 419</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid__serialize_attrs'>_serialize_attrs</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_ldap_attr_store'>ldap_attr_store</span>
    <span class='id identifier rubyid__serialize_attrs'>_serialize_attrs</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_serialize_attrs'>serialize_attrs</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_other'>other</span> <span class='comment'># Assume something Hash like
</span>  <span class='kw'>end</span>

  <span class='id identifier rubyid__ldap_attrs'>_ldap_attrs</span> <span class='op'>=</span> <span class='ivar'>@ldap_attr_store</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
    <span class='id identifier rubyid__ldap_attrs'>_ldap_attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span>
    <span class='symbol'>:serialize</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid__serialize_attrs'>_serialize_attrs</span><span class='comma'>,</span>
    <span class='symbol'>:store</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid__ldap_attrs'>_ldap_attrs</span>
  <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>new?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns true if the model is present in LDAP</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new?'>new?</span>
  <span class='op'>!</span><span class='ivar'>@existing</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="object_model-instance_method">
  
    - (<tt>Object</tt>) <strong>object_model</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


475
476
477</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 475</span>

<span class='kw'>def</span> <span class='id identifier rubyid_object_model'>object_model</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="once_on_save-instance_method">
  
    - (<tt>Object</tt>) <strong>once_on_save</strong>(timing = :before, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create one time hook which is executed once when <code>save!</code> is called</p>

<p>execute after saving</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>Set</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>to :before to execute before saving or :after to</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


532
533
534
535
536
537
538
539
540</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 532</span>

<span class='kw'>def</span> <span class='id identifier rubyid_once_on_save'>once_on_save</span><span class='lparen'>(</span><span class='id identifier rubyid_timing'>timing</span><span class='op'>=</span><span class='symbol'>:before</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_timing'>timing</span> <span class='op'>==</span> <span class='symbol'>:before</span>
    <span class='ivar'>@before_save</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_timing'>timing</span> <span class='op'>==</span> <span class='symbol'>:after</span>
    <span class='ivar'>@after_save</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid argument </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_timing'>timing</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refresh-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>) <strong>refresh</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get new instance of this model from LDAP</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="LdapModel (class)">LdapModel</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/search.rb', line 239</span>

<span class='kw'>def</span> <span class='id identifier rubyid_refresh'>refresh</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_by_dn'>by_dn</span><span class='lparen'>(</span><span class='id identifier rubyid_dn'>dn</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove-instance_method">
  
    - (<tt>Object</tt>) <strong>remove</strong>(pretty_name, value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Remove value from <span class='object_link'><a href="LdapConverters/ArrayValue.html" title="LdapConverters::ArrayValue (class)">LdapConverters::ArrayValue</a></span> attribute. Deletion is
persisted on the next <span class='object_link'><a href="#save%21-instance_method" title="LdapModel#save! (method)">#save!</a></span> call</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Pretty name of the attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value to be removed from the attribute</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove'>remove</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_transform'>transform</span> <span class='op'>=</span> <span class='id identifier rubyid_attr_options'>attr_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:transform</span><span class='rbracket'>]</span>

  <span class='comment'># if not LdapConverters::ArrayValue or subclass of it
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_transform'>transform</span> <span class='op'>&lt;=</span> <span class='const'>LdapConverters</span><span class='op'>::</span><span class='const'>ArrayValue</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#remove(...) can be called only on LdapConverters::ArrayValue values. Not </span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_transform'>transform</span> <span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_new?'>new?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#remove(...) is not supported on new models. Just set the attribute</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@previous_values</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@previous_values</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Transform to the ldap format
</span>  <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_transform'>transform</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

  <span class='id identifier rubyid_add_mod'>add_mod</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>LDAP_MOD_DELETE</span><span class='comma'>,</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_current_val'>current_val</span> <span class='op'>=</span> <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_current_val'>current_val</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_v'>v</span> <span class='op'>==</span> <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save!-instance_method">
  
    - (<tt>Object</tt>) <strong>save!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Save changes to LDAP</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_create!'>create!</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@existing</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_validate!'>validate!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Updating</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_run_hook'>run_hook</span> <span class='symbol'>:before</span><span class='comma'>,</span> <span class='symbol'>:update</span>
  <span class='ivar'>@before_save</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_dirty?'>dirty?</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_ldap_op'>ldap_op</span><span class='lparen'>(</span><span class='symbol'>:modify</span><span class='comma'>,</span> <span class='id identifier rubyid_dn'>dn</span><span class='comma'>,</span> <span class='id identifier rubyid_get_mods'>get_mods</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@after_save</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_reset_pending'>reset_pending</span>
  <span class='id identifier rubyid_run_hook'>run_hook</span> <span class='symbol'>:after</span><span class='comma'>,</span> <span class='symbol'>:update</span>

  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set-instance_method">
  
    - (<tt>Object</tt>) <strong>set</strong>(pretty_name, value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'></div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


404
405
406</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 404</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_hash-instance_method">
  
    - (<tt>Object</tt>) <strong>to_hash</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Convert model to Hash</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 443</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_hash'>to_hash</span>
  <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@serialize_attrs</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@serialize_attrs</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_skip_serialize_attrs'>skip_serialize_attrs</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_computed_attributes'>computed_attributes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='id identifier rubyid_serialize_name'>serialize_name</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@serialize_attrs</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@serialize_attrs</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_serialize_name'>serialize_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_serialize_name'>serialize_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_method_name'>method_name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_h'>h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_json-instance_method">
  
    - (<tt>Object</tt>) <strong>to_json</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns String</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>String</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


470
471
472</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 470</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_json'>to_json</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_as_json'>as_json</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_ldap_hash-instance_method">
  
    - (<tt>Object</tt>) <strong>to_ldap_hash</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


460
461
462</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 460</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_ldap_hash'>to_ldap_hash</span>
  <span class='ivar'>@ldap_attr_store</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transform-instance_method">
  
    - (<tt>Object</tt>) <strong>transform</strong>(pretty_name, method, value) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Transform value using the attribute transformer</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Pretty name of the attribute</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>:read or :write</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>value to transform</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_transform'>transform</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_transformer'>transformer</span> <span class='op'>=</span> <span class='id identifier rubyid_attr_options'>attr_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:transform</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_transformer'>transformer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update!-instance_method">
  
    - (<tt>Object</tt>) <strong>update!</strong>(h) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>h</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Update model attributes from hash</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 185</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update!'>update!</span><span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate-instance_method">
  
    - (<tt>Object</tt>) <strong>validate</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Validation method called before saving. Override it and call
<span class='object_link'><a href="#add_validation_error-instance_method" title="LdapModel#add_validation_error (method)">#add_validation_error</a></span> for any errors</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 481</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate'>validate</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate!-instance_method">
  
    - (<tt>Object</tt>) <strong>validate!</strong>(message = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Run hooks and validations. May raise <span class='object_link'><a href="ValidationError.html" title="ValidationError (class)">ValidationError</a></span></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Optional custom error message</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


511
512
513
514
515
516</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 511</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate!'>validate!</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_run_hook'>run_hook</span> <span class='symbol'>:before</span><span class='comma'>,</span> <span class='symbol'>:validate</span>
  <span class='id identifier rubyid_validate'>validate</span>
  <span class='id identifier rubyid_assert_validation'>assert_validation</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_run_hook'>run_hook</span> <span class='symbol'>:after</span><span class='comma'>,</span> <span class='symbol'>:validate</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_unique-instance_method">
  
    - (<tt>Object</tt>) <strong>validate_unique</strong>(pretty_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Validate uniqueness of an attribute</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pretty_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


486
487
488
489
490
491
492
493</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 486</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_unique'>validate_unique</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_changed?'>changed?</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_pretty2ldap'>pretty2ldap</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_get_raw'>get_raw</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_by_attr'>by_attr</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_add_validation_error'>add_validation_error</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='tstring_content'>_not_unique</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span> <span class='id identifier rubyid_val'>val</span> <span class='rbrace'>}</span><span class='tstring_content'> is not unique</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_raw-instance_method">
  
    - (<tt>Object</tt>) <strong>write_raw</strong>(ldap_name, new_val) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Write raw ldap value</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ldap_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>LDAP attribute name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_val</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value to be written</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206
207
208
209
210
211
212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ldapmodel/attr_conv.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_raw'>write_raw</span><span class='lparen'>(</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_val'>new_val</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ldap_name'>ldap_name</span> <span class='op'>=</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

  <span class='id identifier rubyid_pretty_name'>pretty_name</span> <span class='op'>=</span> <span class='id identifier rubyid_ldap2pretty'>ldap2pretty</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pretty_name'>pretty_name</span>
    <span class='ivar'>@previous_values</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rparen'>)</span>
    <span class='ivar'>@cache</span><span class='lbracket'>[</span><span class='id identifier rubyid_pretty_name'>pretty_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='ivar'>@ldap_attr_store</span><span class='lbracket'>[</span><span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_new_val'>new_val</span>
  <span class='id identifier rubyid_add_mod'>add_mod</span><span class='lparen'>(</span><span class='const'>LDAP</span><span class='op'>::</span><span class='const'>LDAP_MOD_REPLACE</span><span class='comma'>,</span> <span class='id identifier rubyid_ldap_name'>ldap_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_new_val'>new_val</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_new_val'>new_val</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Nov 13 15:41:16 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-1.9.3).
</div>

  </body>
</html>